<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>yeartables</title>
    <style>
      body {
        background: #333;
        box-sizing: border-box;
        padding: 24px;
      }

      table {
        margin: 24px auto;
        border-collapse: collapse;
      }

      td {
        padding: 0;
        --cell-size: 8px;
        width: var(--cell-size);
        height: var(--cell-size);
        overflow: hidden;

        /* border: 1px solid white; */
      }

      .fill {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="tables"></div>
    <script src="js/main.js"></script>
    <script>
      const container = document.getElementById("tables");

      const nowDate = new Date();
      const targetDate = new Date(
        nowDate.getFullYear(),
        nowDate.getMonth() + 6,
        nowDate.getDate()
      );

      const dates = makeDates(targetDate);

      dates.forEach(console.log);

      {
        // Days table
        const { table, cells } = makeWeekTable(dates.length);
        let count = 0;
        const SHIFT = 255;
        cells.forEach((cell, i) => {
          const date = dates[i];
          if (date === null) return;
          const div = document.createElement("div");
          div.className = "fill";
          div.style.backgroundColor = `hsl(${-360 * (count / 365) +
            SHIFT}, 40%, 60%)`;
          div.style.borderLeft = "1px solid #333";
          div.style.borderTop = "1px solid #333";
          cell.appendChild(div);
          count++;
        });
        container.appendChild(table);
      }

      {
        // Months table
        const { table, cells } = makeWeekTable(dates.length);
        cells.forEach((cell, i) => {
          const date = dates[i];
          if (date === null) return;
          const year = date.getFullYear();
          const month = date.getMonth();
          const monthDays = getMonthDays(month, year);
          const monthDay = date.getDate();
          const weekDay = date.getDay();
          const div = document.createElement("div");
          div.className = "fill";
          div.style.backgroundColor = `hsl(${-360 * (month / 12)}, 40%, 60%)`;
          if (monthDay <= 7) {
            div.style.borderLeft = "1px solid #333";
          }
          if (monthDay === monthDays && weekDay !== 6) {
            div.style.borderTop = "1px solid #333";
          }
          cell.appendChild(div);
        });
        container.appendChild(table);
      }

      //
      //
      // Same things no borders
      //

      {
        // Empty table!
        const { table } = makeWeekTable(dates.length);
        container.appendChild(table);
      }

      {
        // Days table
        const { table, cells } = makeWeekTable(dates.length);
        let count = 0;
        const SHIFT = 255;
        cells.forEach((cell, i) => {
          const date = dates[i];
          if (date === null) return;
          const div = document.createElement("div");
          div.className = "fill";
          div.style.backgroundColor = `hsl(${-360 * (count / 365) +
            SHIFT}, 40%, 60%)`;
          cell.appendChild(div);
          count++;
        });
        container.appendChild(table);
      }

      {
        // Months table
        const { table, cells } = makeWeekTable(dates.length);
        cells.forEach((cell, i) => {
          const date = dates[i];
          if (date === null) return;
          const year = date.getFullYear();
          const month = date.getMonth();
          const monthDays = getMonthDays(month, year);
          const monthDay = date.getDate();
          const weekDay = date.getDay();
          const div = document.createElement("div");
          div.className = "fill";
          div.style.backgroundColor = `hsl(${-360 * (month / 12)}, 40%, 60%)`;
          cell.appendChild(div);
        });
        container.appendChild(table);
      }

      //
      //
      // Same things horiz borders
      //

      {
        // Empty table!
        const { table } = makeWeekTable(dates.length);
        container.appendChild(table);
      }

      {
        // Days table
        const { table, cells } = makeWeekTable(dates.length);
        let count = 0;
        const SHIFT = 255;
        cells.forEach((cell, i) => {
          const date = dates[i];
          if (date === null) return;
          const year = date.getFullYear();
          const month = date.getMonth();
          const monthDays = getMonthDays(month, year);
          const monthDay = date.getDate();
          const weekDay = date.getDay();
          const div = document.createElement("div");
          div.className = "fill";
          div.style.backgroundColor = `hsl(${-360 * (count / 365) +
            SHIFT}, 40%, 60%)`;
          div.style.borderLeft = "1px solid #333";
          if (monthDay === monthDays && weekDay !== 6) {
            div.style.borderTop = "1px solid #333";
          }
          div.style.borderLeft = "1px solid #333";
          cell.appendChild(div);
          count++;
        });
        container.appendChild(table);
      }

      {
        // Months table
        const { table, cells } = makeWeekTable(dates.length);
        cells.forEach((cell, i) => {
          const date = dates[i];
          if (date === null) return;
          const year = date.getFullYear();
          const month = date.getMonth();
          const monthDays = getMonthDays(month, year);
          const monthDay = date.getDate();
          const weekDay = date.getDay();
          const div = document.createElement("div");
          div.className = "fill";
          div.style.backgroundColor = `hsl(${-360 * (month / 12)}, 40%, 60%)`;
          div.style.borderLeft = "1px solid #333";
          if (monthDay === monthDays && weekDay !== 6) {
            div.style.borderTop = "1px solid #333";
          }
          cell.appendChild(div);
        });
        container.appendChild(table);
      }
    </script>
  </body>
</html>
