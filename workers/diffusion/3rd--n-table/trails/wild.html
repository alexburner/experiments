<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>trails -- wild</title>
    <style type="text/css">
        html, body, canvas {
            margin: 0;
            padding: 0;
            background: #EEE;
        }
        body {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<script type="text/javascript" src="../..//lib/lodash.min.js"></script>
<script type="text/javascript" src="../..//lib/three.min.js"></script>
<script type="text/javascript" src="../..//lib/three/Detector.js"></script>
<script type="text/javascript" src="../..//lib/three/OrthographicTrackballControls.js"></script>
<script type="text/javascript" src="../../shared/Maths.js"></script>
<script type="text/javascript" src="../../shared/Diffuse.js"></script>
<script type="text/javascript" src="../../shared/WorkerPool.js"></script>
<script type="text/javascript" src="../../shared/AnimationQueue.js"></script>
<script type="text/javascript" src="ThreeCell.js"></script>
<script type="text/javascript">

    var hash = (
        window.location.hash.length ?
            Number(window.location.hash.slice(1)) :
            NaN
    );

    var n = isNaN(hash) ? 6 : hash;
    var limit = n + 1;

    var pool = new WorkerPool('../../shared/StatelessWorker.js', 2);
    var queue = new AnimationQueue();

    var args = {
        width: window.innerWidth,
        height: window.innerHeight,
        radius: 60,
        options: {
            speed: 0.008,
            bounding: false,
            centering: true,
            scaling: true,
        },
        pool: pool,
        queue: queue,
    };

    var containerEl = document.createElement('div');
    containerEl.style.width = args.width + 'px';
    containerEl.style.height = args.height * 2 + 'px';
    containerEl.style.position = 'relative';
    containerEl.style.margin = 'auto';
    document.body.appendChild(containerEl);

    function makeCellEl(top, left, width, height, radius) {
        var diameter = radius * 2;
        var cellEl = document.createElement('div');
        cellEl.style.position = 'absolute';
        cellEl.style.top = top + 'px';
        cellEl.style.left = left + 'px';
        cellEl.style.width = width + 'px';
        cellEl.style.height = height + 'px';
        containerEl.appendChild(cellEl);
        return cellEl;
    }

    // 3d cell
    new ThreeCell(
        Object.create(args, {
            count: {value: 12},
            el: {value: makeCellEl(
                0,
                0,
                args.width,
                args.height,
                args.radius
            )}
        })
    ).start();

</script>
</body>
</html>